name: C Program Tests

on: [push]

jobs:
  build:
    runs-on: ubuntu-latest
    
    steps:
    - name: Check out code
      uses: actions/checkout@v2

    - name: Build and test
      run: |
        gcc -o rectangle rectangle.c
        output=$(echo -e "5\n7" | ./rectangle)
        echo "$output"
        if [ "$output" == "Perimeter of the Rectangle is : 24.00" ]; then
          echo "Test passed!"
        else
          echo "Test failed!"
          exit 1
        fi
